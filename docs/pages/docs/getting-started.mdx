# Get started

## Laser Eyes

A powerful and flexible npm package for connecting various Bitcoin wallets to your client-side JavaScript and TypeScript applications.

## Features

- Support for multiple Bitcoin wallets: OYL, Unisat, Xverse, and Leather
- Easy-to-use React context and hooks
- Network switching between mainnet and testnet
- Comprehensive wallet operations including balance checking, transaction signing, and message signing
- TypeScript support

## Installation

:::code-group

```bash [yarn]
yarn add @omnisat/lasereyes
```

```bash [npm]
npm install @omnisat/lasereyes
```

```bash [pnpm]
pnpm i @omnisat/lasereyes
```

```bash [bun]
bun i @omnisat/lasereyes
```

:::

## Quick Start

1. Wrap your app with the `LaserEyesProvider`:

```jsx
import { LaserEyesProvider } from '@omnisat/lasereyes';

function App() {
  return (
    <LaserEyesProvider>
      {/* Your app components */}
    </LaserEyesProvider>
  );
}
```

2. Use the `useLaserEyes` hook in your components:

```jsx
import { useLaserEyes } from '@omnisat/lasereyes';

function WalletConnector() {
  const { connect, connected, address, balance } = useLaserEyes();

  const handleConnect = () => {
    connect('unisat'); // or 'oyl', 'xverse', 'leather'
  };

  return (
    <div>
      {!connected ? (
        <button onClick={handleConnect}>Connect Wallet</button>
      ) : (
        <div>
          <p>Connected Address: {address}</p>
          <p>Balance: {balance.total}</p>
        </div>
      )}
    </div>
  );
}
```

## API Reference

### LaserEyesProvider

The main context provider that should wrap your app.

### useLaserEyes

A hook that provides access to all wallet functions and state. Here are some key properties and methods:

- `connected`: Boolean indicating if a wallet is connected
- `address`: The current wallet address
- `balance`: Object containing confirmed, unconfirmed, and total balance
- `network`: Current network (mainnet or testnet)
- `connect(walletName)`: Connect to a specific wallet
- `disconnect()`: Disconnect the current wallet
- `sendBTC(to: string, amount: number)`: Send Bitcoin
- `signMessage(message: string)`: Sign a message
- `signPsbt(tx: string, finalize?: boolean, broadcast?: boolean)`: Sign a PSBT
- `switchNetwork(network: 'mainnet' | 'testnet')`: Switch between networks

## Supported Wallets

- OYL
- Unisat
- Xverse
- Leather (currently disabled in the provided code)

Each wallet has different capabilities and methods of interaction. The package abstracts these differences to provide a unified API.

## Network Handling

The package supports both mainnet and testnet. You can switch networks using the `switchNetwork` function, and check the current network with the `network` property.

## Error Handling

Most functions in the package are asynchronous and may throw errors. It's recommended to use try-catch blocks when calling these functions:

```javascript
try {
  await connect('unisat');
} catch (error) {
  console.error('Failed to connect:', error);
}
```

## Advanced Usage

### Custom Configuration

You can create a custom configuration using the `createConfig` function:

```javascript
import { createConfig } from '@omnisat/lasereyes';

const config = createConfig({
  network: 'testnet',
  provider: 'unisat',
  chainId: 1,
});
```

### Working with PSBTs

The package provides methods for signing and pushing Partially Signed Bitcoin Transactions (PSBTs):

```javascript
const psbt = '...'; // Your PSBT string
const signedPsbt = await signPsbt(psbt, true, false);
const txId = await pushPsbt(signedPsbt);
```

## Best Practices

1. Always check if a wallet is connected before performing operations.
2. Handle network changes gracefully, as they can affect address and balance.
3. Provide clear feedback to users during wallet operations, as they may require user interaction in the wallet interface.
4. Always validate user input before sending transactions or signing messages.

## Contributing

Contributions are welcome! Please check out our [Contributing Guide](CONTRIBUTING.md) for more details.

## License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.
